<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
	</head>

	<body>
		<p>try 语句测试代码块的错误。catch 语句处理错误。throw语句创建自定义错误。</p>
		<input type="button" value="查看消息" onclick="message()" />
		<p>请输入 5 到 10 之间的数字：</p>
		<input id="demo" type="text">
		<button type="button" onclick="myFunction()">测试输入值</button>
		<p id="mess"></p>
	</body>
	<script type="text/javascript">
		 //try,catch
		var txt = "";

		function message() {
				try {
					adddlert("Welcome guest!"); //此处故意写错函数名
				} catch (err) {
					txt = "本页有一个错误。\n\n";
					txt += "错误描述：" + err.message + "\n\n";
					txt += "点击确定继续。\n\n";
					alert(txt);
				}
			}
			//throw,throw new Error的简写

		function myFunction() {
				try {
					var x = document.getElementById("demo").value;
					if (x == "") throw "值为空";
					if (isNaN(x)) throw "不是数字";
					if (x > 10) throw "太大";
					if (x < 5) throw "太小";
				} catch (err) {
					var y = document.getElementById("mess");
					y.innerHTML = "错误：" + err + "。";
				}
			}
			//throw new Error

		function divide(num1, num2) {
			if (typeof num1 != "number" || typeof num2 != "number") 
				throw new Error("divide(): Both arguments must be numbers.");
			return num1 / num2;
		}
		try{
			alert(divide(10, "ds"));
		}
		catch(e){
			alert(e);
		}
		 //自定义的错误通常都使用assert()函数抛出。这个函数接受两个参数，一个是求值结果应该为true的条件，另一个是条件为false时要抛出的错误。
		function divide1(num1, num2) {
			console.assert(typeof num1 == "number" && typeof num2 == "number",
				"divide(): Both arguments must be numbers.");
			return num1 / num2;
		}
		 //自定义getElementByIdx_x函数
		document.getElementByIdx_x = function(id) {
			if (typeof id == 'string')
				return document.getElementById(id);
			else
				throw new Error('please pass a string as a id!')
		}
		function factoral(x){
			if(x<0)throw new Error("x不能是负数");
			for (var f=1;x>1;f*=x,x--) {
				;
			}
			return f;
		}
		try{
			var n=Number(prompt("请输入一个正数",10));
			alert(n+"!="+factoral(n));
//			alert(factoral(-10));
		}
		catch(e){
			alert(e);
		}
		finally{
			alert("计算完毕");
		}
	</script>

</html>